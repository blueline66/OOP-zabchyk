
## Принципи ISP та DIP (SOLID)

Принципи ISP (Interface Segregation Principle) та DIP (Dependency Inversion Principle) є складовими SOLID і використовуються для створення гнучкого, підтримуваного та тестованого коду. Вони допомагають зменшити зв’язаність між компонентами системи та зробити архітектуру більш зрозумілою.

### 1. Приклад інтерфейсу, що порушує ISP, та вирішення проблеми

Принцип ISP говорить, що класи не повинні залежати від методів, які вони не використовують. Порушення цього принципу часто виникає, коли створюється надто великий інтерфейс.

```csharp
public interface IWorker
{
    void Work();
    void Eat();
    void Sleep();
}
```

Такий інтерфейс змушує всі класи реалізовувати методи `Eat()` і `Sleep()`, навіть якщо вони не мають сенсу для конкретної реалізації. Наприклад, робот не потребує їжі або сну, але все одно змушений реалізовувати ці методи, що призводить до логічних помилок або використання `NotImplementedException`.

Рішенням є розділення інтерфейсу на кілька вузьких, кожен з яких відповідає лише за одну поведінку:

```csharp
public interface IWorkable
{
    void Work();
}

public interface IFeedable
{
    void Eat();
    void Sleep();
}
```

Тепер кожен клас реалізує тільки ті інтерфейси, які йому дійсно потрібні, що повністю відповідає принципу ISP.



### 2. Переваги застосування DIP (через Dependency Injection)

Принцип інверсії залежностей (DIP) полягає в тому, що модулі високого рівня не повинні залежати від конкретних реалізацій модулів низького рівня. Усі залежності мають будуватися на абстракціях, тобто інтерфейсах.

Застосування Dependency Injection дозволяє передавати залежності ззовні, наприклад, через конструктор класу:

```csharp
public interface IMessageSender
{
    void Send(string message);
}

public class OrderService
{
    private readonly IMessageSender _sender;

    public OrderService(IMessageSender sender)
    {
        _sender = sender;
    }
}
```

Такий підхід має низку переваг: код стає менш зв’язаним, легше розширюється, а також значно спрощується тестування. За потреби можна легко замінити одну реалізацію іншою без зміни бізнес-логіки класу.



### 3. Як вузькі інтерфейси (ISP) сприяють кращому DI та тестуванню

Вузькі інтерфейси напряму покращують використання Dependency Injection. Чим менше методів має інтерфейс, тим простіше створити його реалізацію або тестову підміну. Це дозволяє легко ізолювати залежності під час модульного тестування.

```csharp
public class FakeMessageSender : IMessageSender
{
    public void Send(string message) { }
}
```

Завдяки ISP класи залежать лише від необхідного мінімуму функціональності, що робить DI більш зрозумілим, а тести — простими та надійними. Це також зменшує кількість помилок при зміні або розширенні коду.



### Висновок

Застосування принципів ISP та DIP дозволяє створювати чисту та гнучку архітектуру. ISP допомагає уникати зайвих залежностей і робить інтерфейси логічними та зрозумілими, а DIP забезпечує слабку зв’язаність між компонентами системи. Разом ці принципи значно спрощують тестування, підтримку та подальший розвиток програмного забезпечення.


